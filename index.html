<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CumpleaÃ±os Lois ğŸ‰</title>
<style>
body { font-family:'Segoe UI', sans-serif; background:#ffe4b5; text-align:center; padding:40px; }
h1 { font-size:2.5em; color:#d2691e; margin-bottom:20px; }
button { font-size:1.5em; padding:20px 40px; margin:20px; border:none; border-radius:15px; cursor:pointer; font-weight:bold; box-shadow:0 5px 15px rgba(0,0,0,.2); transition:0.2s; }
button:hover { transform:scale(1.05); }
.gofre { background:#d2691e; color:white; }
.tortitas { background:#f4c430; color:#333; }
.stats { margin-top:30px; font-size:1.2em; }
</style>
</head>
<body>
<h1>ğŸ‰ CUMPLEAÃ‘OS LOIS ğŸ‰</h1>
<p>Elige tu pedido:</p>
<button class="gofre" onclick="location.href='gofres.html'">ğŸ§‡ Gofres</button>
<button class="tortitas" onclick="location.href='tortitas.html'">ğŸ¥ Tortitas</button>

<div class="stats">
<p id="mediaGofres">Media Gofres: -- â­</p>
<p id="mediaTortitas">Media Tortitas: -- â­</p>
</div>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script>
const firebaseConfig = {
  apiKey: "AIzaSyCUtGv322RpaHehADB7BqHEkOjMFV2cEoc",
  authDomain: "gofres-tortitas.firebaseapp.com",
  projectId: "gofres-tortitas",
  storageBucket: "gofres-tortitas.firebasestorage.app",
  messagingSenderId: "840337514642",
  appId: "1:840337514642:web:3986826058b711131e464b"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

const mediaGofres = document.getElementById("mediaGofres");
const mediaTortitas = document.getElementById("mediaTortitas");

function calcularMedia(tipo, elemento){
  db.collection("pedidos").where("tipo","==",tipo).onSnapshot(snapshot=>{
    let notas = snapshot.docs.map(doc=>doc.data().nota).filter(n=>n!==undefined);
    if(notas.length===0) { elemento.innerText = `Media ${tipo}: -- â­`; return; }
    let media = notas.reduce((a,b)=>a+b,0)/notas.length;
    elemento.innerText = `Media ${tipo}: ${media.toFixed(1)} â­`;
  });
}

calcularMedia("Gofre", mediaGofres);
calcularMedia("Tortitas", mediaTortitas);
</script>
</body>
</html>
